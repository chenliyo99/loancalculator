/**
 * @license Copyright 2013 - 2014 Intel Corporation All Rights Reserved.
 *
 * The source code, information and material ("Material") contained herein is owned by Intel Corporation or its
 * suppliers or licensors, and title to such Material remains with Intel Corporation or its suppliers or
 * licensors. The Material contains proprietary information of Intel or its suppliers and licensors. The
 * Material is protected by worldwide copyright laws and treaty provisions. No part of the Material may be used,
 * copied, reproduced, modified, published, uploaded, posted, transmitted, distributed or disclosed in any way
 * without Intel's prior express written permission. No license under any patent, copyright or other intellectual
 * property rights in the Material is granted to or conferred upon you, either expressly, by implication,
 * inducement, estoppel or otherwise. Any license under such intellectual property rights must be express and
 * approved by Intel in writing.
 *
 * Unless otherwise agreed by Intel in writing, you may not remove or alter this notice or any other notice
 * embedded in Materials by Intel or Intel's suppliers or licensors in any way.
 */
goog.provide("idr.runtime.Button"),goog.require("idr.runtime.ComponentRuntime"),goog.require("idr.components.ButtonBase"),idr.runtime.Button=function(id,data,parent){idr.components.ButtonBase.call(this,id,data,parent),this.initializeRuntime(data),this._viewMarkup=null,this._titleMarkup=null,this._imageMarkup=null,this._previousFontFamily=null,this._previousShape=null,this._previousIcon=null,this.addPropertyChangedHandler("title",function(){this._titleMarkup.text(this.title())}),this.type()===idr.components.ButtonBase.BUTTON_TYPE.icon&&this.addPropertyChangedHandler("icon",function(){this._titleMarkup.removeClass(this._previousIcon).addClass(this.icon()),this._previousIcon=this.icon()}),this.addPropertyChangedHandler("backgroundColor",function(){this._viewMarkup.css("background-color","#"+this.backgroundColor())}),this.addPropertyChangedHandler("textAlignament",function(){this._titleMarkup.css("text-align",this.textAlignament())}),this.addPropertyChangedHandler("fontColor",function(){this._titleMarkup.css("color","#"+this.fontColor())}),this.addPropertyChangedHandler("fontSize",function(){this._titleMarkup.css("font-size",this.fontSize())}),this.addPropertyChangedHandler("fontFamily",function(){this._titleMarkup.removeClass(this._previousFontFamily),this._titleMarkup.addClass(this.fontFamily()),this._previousFontFamily=this.fontFamily()}),this.addPropertyChangedHandler("height",function(){this.Parent.updateChildComponentHeight(this,this.height())}),this.type()===idr.components.ButtonBase.BUTTON_TYPE.image&&(this.addPropertyChangedHandler("image",function(){this._imageMarkup.attr("src",this.image())}),this.addPropertyChangedHandler("titleVisibility",function(){this._titleMarkup.toggle(this.titleVisibility())}),this.addPropertyChangedHandler("shape",function(){this._imageMarkup.removeClass(this._previousShape),this._imageMarkup.addClass(this.shape()),this._previousShape=this.shape()})),idr.runtime.Button.cssLoaded!==!0&&(this.loadCss("Button","button.runtime.css"),idr.runtime.Button.cssLoaded=!0)},goog.inherits(idr.runtime.Button,idr.components.ButtonBase),goog.mixin(idr.runtime.Button.prototype,idr.runtime.ComponentRuntime.prototype),idr.runtime.Button.prototype.render=function(){var that=this;if(this.type()===idr.components.ButtonBase.BUTTON_TYPE.simple&&null===this._viewMarkup&&(this._titleMarkup=$('<a class="button block">'+this.title()+"</a>"),this._viewMarkup=this._titleMarkup),this.type()===idr.components.ButtonBase.BUTTON_TYPE.icon&&null===this._viewMarkup&&(this._titleMarkup=$('<a class="button block icon '+this.icon()+'"> '+this.title()+"</a>"),this._viewMarkup=this._titleMarkup,this._previousIcon=this.icon()),this.type()===idr.components.ButtonBase.BUTTON_TYPE.link&&null===this._viewMarkup&&(this._titleMarkup=$('<div class="anchor idr-button-anchor">'+this.title()+"</div>"),this._viewMarkup=this._titleMarkup),this.type()===idr.components.ButtonBase.BUTTON_TYPE.image&&null===this._viewMarkup&&(this._imageMarkup=$('<img src="'+this.image()+'" draggable="false"></img>'),this._titleMarkup=$("<span>"+this.title()+"</span>"),this._viewMarkup=$('<div class="idr-button-image"></div>'),this._viewMarkup.append(this._imageMarkup),this._viewMarkup.append(this._titleMarkup)),this._viewMarkup.click(function(){that.fireEvent("ONCLICK")}),this.textAlignament()&&this._viewMarkup.css("text-align",this.textAlignament()),this.backgroundColor()&&this._viewMarkup.css("background-color","#"+this.backgroundColor()),this.fontColor()&&this._titleMarkup.css("color","#"+this.fontColor()),this.fontSize()&&this._titleMarkup.css("font-size",this.fontSize()),this.fontFamily()&&(this._viewMarkup.removeClass(this._previousFontFamily),this._viewMarkup.addClass(this.fontFamily()),this._previousFontFamily=this.fontFamily()),this.type()===idr.components.ButtonBase.BUTTON_TYPE.image){var displayType=this.titleVisibility()?"block":"none";this._titleMarkup.css("display",displayType),this.shape()&&(this._imageMarkup.addClass(this.shape()),this._previousShape=this.shape())}},idr.runtime.Button.prototype.view=function(){return null===this._viewMarkup&&this.render(),this._viewMarkup},idr.runtime.Button.prototype.componentDeleted=function(){this._viewMarkup.remove(),idr.components.ButtonBase.prototype.componentDeleted.call(this)},idr.runtime.Button.prototype.onChildrenAdded=function(child){var childMarkup=child.view();this._contentDiv.append(childMarkup)},idr.runtime.Button.prototype.onChildrenRemoved=function(){};