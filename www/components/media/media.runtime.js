/**
 * @license Copyright 2013 - 2014 Intel Corporation All Rights Reserved.
 *
 * The source code, information and material ("Material") contained herein is owned by Intel Corporation or its
 * suppliers or licensors, and title to such Material remains with Intel Corporation or its suppliers or
 * licensors. The Material contains proprietary information of Intel or its suppliers and licensors. The
 * Material is protected by worldwide copyright laws and treaty provisions. No part of the Material may be used,
 * copied, reproduced, modified, published, uploaded, posted, transmitted, distributed or disclosed in any way
 * without Intel's prior express written permission. No license under any patent, copyright or other intellectual
 * property rights in the Material is granted to or conferred upon you, either expressly, by implication,
 * inducement, estoppel or otherwise. Any license under such intellectual property rights must be express and
 * approved by Intel in writing.
 *
 * Unless otherwise agreed by Intel in writing, you may not remove or alter this notice or any other notice
 * embedded in Materials by Intel or Intel's suppliers or licensors in any way.
 */
goog.provide("idr.runtime.Media"),goog.require("idr.runtime.ComponentRuntime"),goog.require("idr.components.MediaBase"),goog.require("idr.components.SimpleImageItem"),goog.require("idr.components.AudioItem"),goog.require("idr.components.MediaCoreRuntime"),idr.runtime.Media=function(id,data,parent){idr.components.MediaBase.call(this,id,data,parent),this.initializeRuntime(data),this.loadCss("media","media.runtime.css"),this._mediaCore=new idr.components.MediaCoreRuntime(this),this.mediaData()&&this.mediaDataRange()&&this.setMediaItems(this.mediaDataRange());var that=this;this.addPropertyChangedHandler("mediaData",function(){this.setNeedsConfigurationIfNeeded()}),this.addPropertyChangedHandler("mediaDataRange",function(){this.setMediaItems(this.mediaDataRange())}),this.addPropertyChangedHandler("galleryType",function(){this._mediaCore.updateGalleryType()}),this.addPropertyChangedHandler("imageStretchMode",function(){this._mediaCore.updateImageStretchMode()}),this.addPropertyChangedHandler("padding",function(){this._mediaCore.updatePadding()}),this.addPropertyChangedHandler("gridPadding",function(){this._mediaCore.updateGridPadding()}),this.addPropertyChangedHandler("currentItem",function(){this._mediaCore.goTo(this.currentItem())}),this.addPropertyChangedHandler("height",function(){this.Parent.updateChildComponentHeight(this,this.height())}),this._mediaCore.setMediaGalleryChangeCallback(function(){that._mediaCore.updateContentMarkup()}),this._mediaCore.setCurrentMediaChangeCallback(function(pos,item){that._mediaCore.updateItemMarkup(item)}),this._mediaCore.setItemSelectedCallback(function(item){that.itemSelected(item)})},goog.inherits(idr.runtime.Media,idr.components.MediaBase),goog.mixin(idr.runtime.Media.prototype,idr.runtime.ComponentRuntime.prototype),idr.runtime.Media.prototype.render=function(){return this._mediaCore.view()},idr.runtime.Media.prototype.view=function(){return this.render()},idr.runtime.Media.prototype.componentDeleted=function(){this._mediaCore.remove(),idr.components.MediaBase.prototype.componentDeleted.call(this)},idr.runtime.Media.prototype.onChildrenAdded=function(child){var childMarkup=child.view();this._contentDiv.append(childMarkup)},idr.runtime.Media.prototype.onChildrenRemoved=function(){},idr.runtime.Media.prototype.itemId=function(id){return this.Id+"_item-"+id},idr.runtime.Media.prototype.itemSelected=function(itemId){var mediaItem=this._mediaCore.getItemById(itemId),id=parseInt(itemId.substr([itemId.lastIndexOf("-")+1]),10);isNaN(id)||this.Binder.copySelectedItem("default",id,this.mediaData(),this.targetDataRange(),!0);var preventTransition=!1;mediaItem&&this.galleryType()===idr.components.MediaBase.GALLERY_TYPE.single&&(preventTransition=mediaItem.clickAction()),preventTransition||this.fireEvent("ONCLICK")};