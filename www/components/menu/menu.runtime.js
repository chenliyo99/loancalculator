/**
 * @license Copyright 2013 - 2014 Intel Corporation All Rights Reserved.
 *
 * The source code, information and material ("Material") contained herein is owned by Intel Corporation or its
 * suppliers or licensors, and title to such Material remains with Intel Corporation or its suppliers or
 * licensors. The Material contains proprietary information of Intel or its suppliers and licensors. The
 * Material is protected by worldwide copyright laws and treaty provisions. No part of the Material may be used,
 * copied, reproduced, modified, published, uploaded, posted, transmitted, distributed or disclosed in any way
 * without Intel's prior express written permission. No license under any patent, copyright or other intellectual
 * property rights in the Material is granted to or conferred upon you, either expressly, by implication,
 * inducement, estoppel or otherwise. Any license under such intellectual property rights must be express and
 * approved by Intel in writing.
 *
 * Unless otherwise agreed by Intel in writing, you may not remove or alter this notice or any other notice
 * embedded in Materials by Intel or Intel's suppliers or licensors in any way.
 */
goog.provide("idr.runtime.Menu"),goog.require("idr.runtime.ComponentRuntime"),goog.require("idr.components.MenuBase"),idr.runtime.Menu=function(id,data,parent){idr.components.MenuBase.call(this,id,data,parent),this.initializeRuntime(data),this._menuMarkup=null,this._headerMarkup=null,this._contentMarkup=null,this._previousFontFamily=null,this.initialize(),this.addPropertyChangedHandler("title",function(){this._headerMarkup.text(this.title())}),this.addPropertyChangedHandler("backgroundColor",function(){$("#menu").css("background-color","#"+this.backgroundColor()),this._headerMarkup.css("background-color",this.backgroundColor())}),this.addPropertyChangedHandler("textAlignament",function(){this._headerMarkup.css("text-align",this.textAlignament())}),this.addPropertyChangedHandler("fontColor",function(){this._headerMarkup.css("color","#"+this.fontColor())}),this.addPropertyChangedHandler("fontSize",function(){this._headerMarkup.css("font-size",this.fontSize())}),this.addPropertyChangedHandler("fontFamily",function(){this._headerMarkup.removeClass(this._previousFontFamily),this._headerMarkup.addClass(this.fontFamily()),this._previousFontFamily=this.fontFamily()})},goog.inherits(idr.runtime.Menu,idr.components.MenuBase),goog.mixin(idr.runtime.Menu.prototype,idr.runtime.ComponentRuntime.prototype),idr.runtime.Menu.prototype.show=function(){$.ui.toggleSideMenu()},idr.runtime.Menu.prototype.initialize=function(){this._menuMarkup=$("#side-menu")},idr.runtime.Menu.prototype.render=function(){if(null===this._headerMarkup&&null===this._contentMarkup){var id=this.Id;$("#"+id).length>0||(this._contentMarkup=$('<ul class="list"></ul>'),this._headerMarkup=$('<li class="divider">'+this.title()+"</li>"),this._contentMarkup.prepend(this._headerMarkup),this._menuMarkup.append(this._contentMarkup),this.backgroundColor()&&($("#menu").css("background-color","#"+this.backgroundColor()),this._headerMarkup.css("background-color",this.backgroundColor())),this.textAlignament()&&this._headerMarkup.css("text-align",this.textAlignament()),this.fontColor()&&this._headerMarkup.css("color","#"+this.fontColor()),this.fontSize()&&this._headerMarkup.css("font-size",this.fontSize()),this.fontFamily()&&this._headerMarkup.addClass(this.fontFamily()),$.ui.enableSideMenu())}},idr.runtime.Menu.prototype.componentDeleted=function(){$.ui.disableSideMenu(),this._headerMarkup.remove(),this._contentMarkup.remove(),idr.components.MenuBase.prototype.componentDeleted.call(this)},idr.runtime.Menu.prototype.onChildrenAdded=function(child){var childMarkup=child.view();this._contentMarkup||this.render(),this._contentMarkup.append(childMarkup)};